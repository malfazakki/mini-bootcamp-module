# Materi 2.1: Validasi Form

## âœ… Apa itu Validasi Form?

**Validasi form** adalah proses memastikan bahwa data yang diinput oleh user **benar** dan **sesuai format** sebelum diproses lebih lanjut.

**ğŸ’¡ Analogi:**
Seperti security check di bandaraâ€”memastikan semua dokumen lengkap dan valid sebelum boarding!

**Kenapa Validasi Penting?**
- âœ… Mencegah data tidak valid masuk ke database
- âœ… Memberikan feedback langsung ke user
- âœ… Meningkatkan user experience
- âœ… Keamanan (mencegah SQL injection, XSS, dll)

---

## ğŸ¯ 2 Jenis Validasi

### **1ï¸âƒ£ Client-Side Validation (di Browser)**
- Menggunakan HTML5 attributes
- Menggunakan JavaScript
- Lebih cepat (tidak perlu request ke server)
- Lebih baik untuk UX

### **2ï¸âƒ£ Server-Side Validation (di Server)**
- WAJIB ada! (client-side bisa di-bypass)
- Diproses di backend (Node.js, PHP, dll)
- Lebih aman

**ğŸ’¡ Best Practice:** Gunakan KEDUANYA!

---

## ğŸ“ HTML5 Built-in Validation

HTML5 punya atribut bawaan untuk validasi dasar.

### **1ï¸âƒ£ `required` - Field Wajib Diisi**

```html
<form>
    <label>Nama:</label>
    <input type="text" name="nama" required>
    
    <button type="submit">Submit</button>
</form>
```

**Hasil:** Jika kosong, browser akan mencegah submit dan tampilkan pesan error otomatis.

---

### **2ï¸âƒ£ `type` - Validasi tipe data**

```html
<!-- Email -->
<input type="email" required>
<!-- Browser akan cek format email (harus ada @) -->

<!-- URL -->
<input type="url" required>
<!-- Harus format http://... atau https://... -->

<!-- Number -->
<input type="number" min="1" max="100">
<!-- Hanya angka, antara 1-100 -->

<!-- Date -->
<input type="date">
<!-- Akan muncul date picker -->

<!-- Tel (Telephone) -->
<input type="tel" pattern="[0-9]{10,13}">
<!-- Hanya angka, 10-13 digit -->
```

---

### **3ï¸âƒ£ `minlength` & `maxlength` - Panjang Karakter**

```html
<!-- Password minimal 8 karakter -->
<input type="password" minlength="8" required>

<!-- Username maksimal 20 karakter -->
<input type="text" maxlength="20" required>

<!-- Kombinasi -->
<input type="text" minlength="5" maxlength="15">
```

---

### **4ï¸âƒ£ `min` & `max` - Nilai Minimum/Maximum**

```html
<!-- Umur minimal 17 -->
<input type="number" min="17" max="100">

<!-- Tanggal lahir (max hari ini) -->
<input type="date" max="2026-01-20">
```

---

### **5ï¸âƒ£ `pattern` - Regex Validation**

```html
<!-- Nomor HP Indonesia (08xxxxxxxxxx) -->
<input type="tel" pattern="08[0-9]{9,11}" placeholder="08xxxxxxxxxx">

<!-- Username (hanya huruf dan angka, 5-15 karakter) -->
<input type="text" pattern="[A-Za-z0-9]{5,15}" placeholder="username123">

<!-- Kode Pos (5 digit) -->
<input type="text" pattern="[0-9]{5}" placeholder="12345">
```

**ğŸ“š Regex Patterns yang Sering Dipakai:**
```regex
[0-9]{5}           â†’ 5 digit angka
[A-Za-z]+          â†’ Huruf saja (min 1)
[A-Za-z0-9]{5,15}  â†’ Huruf/angka, 5-15 karakter
^\d{10,13}$        â†’ 10-13 digit angka
^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$  â†’ Email
```

---

### **6ï¸âƒ£ Custom Error Messages**

```html
<input 
    type="email" 
    required 
    oninvalid="this.setCustomValidity('Mohon masukkan email yang valid')"
    oninput="this.setCustomValidity('')"
>
```

---

## ğŸ¨ CSS untuk Validasi Visual

```css
/* Valid input */
input:valid {
    border: 2px solid green;
}

/* Invalid input */
input:invalid {
    border: 2px solid red;
}

/* Input yang di-required */
input:required {
    border-left: 3px solid blue;
}

/* Input yang optional */
input:optional {
    border-left: 3px solid #ccc;
}
```

---

## ğŸ’» JavaScript Validation

Untuk validasi yang lebih kompleks, gunakan JavaScript.

### **Example 1: Form Validation Dasar**

**HTML:**
```html
<form id="registrationForm">
    <div>
        <label>Nama Lengkap:</label>
        <input type="text" id="nama" required>
        <span class="error" id="namaError"></span>
    </div>
    
    <div>
        <label>Email:</label>
        <input type="email" id="email" required>
        <span class="error" id="emailError"></span>
    </div>
    
    <div>
        <label>Password:</label>
        <input type="password" id="password" required>
        <span class="error" id="passwordError"></span>
    </div>
    
    <div>
        <label>Konfirmasi Password:</label>
        <input type="password" id="confirmPassword" required>
        <span class="error" id="confirmError"></span>
    </div>
    
    <button type="submit">Daftar</button>
</form>
```

**JavaScript:**
```javascript
const form = document.getElementById('registrationForm');
const nama = document.getElementById('nama');
const email = document.getElementById('email');
const password = document.getElementById('password');
const confirmPassword = document.getElementById('confirmPassword');

form.addEventListener('submit', (e) => {
    e.preventDefault();  // Mencegah submit default
    
    // Clear previous errors
    clearErrors();
    
    let isValid = true;
    
    // Validasi Nama
    if (nama.value.trim() === '') {
        showError('namaError', 'Nama tidak boleh kosong');
        isValid = false;
    } else if (nama.value.trim().length < 3) {
        showError('namaError', 'Nama minimal 3 karakter');
        isValid = false;
    }
    
    // Validasi Email
    if (!isValidEmail(email.value)) {
        showError('emailError', 'Email tidak valid');
        isValid = false;
    }
    
    // Validasi Password
    if (password.value.length < 8) {
        showError('passwordError', 'Password minimal 8 karakter');
        isValid = false;
    } else if (!isStrongPassword(password.value)) {
        showError('passwordError', 'Password harus mengandung huruf besar, huruf kecil, dan angka');
        isValid = false;
    }
    
    // Validasi Konfirmasi Password
    if (password.value !== confirmPassword.value) {
        showError('confirmError', 'Password tidak cocok');
        isValid = false;
    }
    
    // Jika semua valid, submit form
    if (isValid) {
        alert('Form berhasil disubmit!');
        console.log('Data:', {
            nama: nama.value,
            email: email.value,
            password: password.value
        });
        form.reset();
    }
});

// Fungsi helper
function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    errorElement.textContent = message;
    errorElement.style.color = 'red';
}

function clearErrors() {
    const errors = document.querySelectorAll('.error');
    errors.forEach(error => error.textContent = '');
}

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function isStrongPassword(password) {
    // Minimal ada huruf besar, kecil, dan angka
    const hasUpperCase = /[A-Z]/.test(password);
    const hasLowerCase = /[a-z]/.test(password);
    const hasNumber = /[0-9]/.test(password);
    
    return hasUpperCase && hasLowerCase && hasNumber;
}
```

---

## ğŸ¯ Real-time Validation (Validasi Langsung)

Memberikan feedback saat user sedang mengetik.

**HTML:**
```html
<div>
    <label>Username:</label>
    <input type="text" id="username">
    <span id="usernameHint"></span>
</div>

<div>
    <label>Password:</label>
    <input type="password" id="passwordInput">
    <div id="passwordStrength"></div>
</div>
```

**JavaScript:**
```javascript
const username = document.getElementById('username');
const usernameHint = document.getElementById('usernameHint');

// Real-time validation untuk username
username.addEventListener('input', () => {
    const value = username.value;
    
    if (value.length === 0) {
        usernameHint.textContent = '';
    } else if (value.length < 5) {
        usernameHint.textContent = 'âŒ Minimal 5 karakter';
        usernameHint.style.color = 'red';
    } else if (!/^[a-zA-Z0-9]+$/.test(value)) {
        usernameHint.textContent = 'âŒ Hanya huruf dan angka';
        usernameHint.style.color = 'red';
    } else {
        usernameHint.textContent = 'âœ… Username valid';
        usernameHint.style.color = 'green';
    }
});

// Password strength indicator
const passwordInput = document.getElementById('passwordInput');
const passwordStrength = document.getElementById('passwordStrength');

passwordInput.addEventListener('input', () => {
    const password = passwordInput.value;
    let strength = 0;
    
    if (password.length >= 8) strength++;
    if (/[A-Z]/.test(password)) strength++;
    if (/[a-z]/.test(password)) strength++;
    if (/[0-9]/.test(password)) strength++;
    if (/[^A-Za-z0-9]/.test(password)) strength++;  // Special char
    
    switch (strength) {
        case 0:
        case 1:
            passwordStrength.textContent = 'Weak ğŸ˜Ÿ';
            passwordStrength.style.color = 'red';
            break;
        case 2:
        case 3:
            passwordStrength.textContent = 'Medium ğŸ˜';
            passwordStrength.style.color = 'orange';
            break;
        case 4:
        case 5:
            passwordStrength.textContent = 'Strong ğŸ’ª';
            passwordStrength.style.color = 'green';
            break;
    }
});
```

---

## ğŸ¨ Project: Form Registrasi Lengkap

**HTML:**
```html
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Form Registrasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 500px;
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        input.valid {
            border-color: #2ecc71;
        }
        
        input.invalid {
            border-color: #e74c3c;
        }
        
        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: block;
        }
        
        .hint {
            font-size: 14px;
            margin-top: 5px;
            display: block;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #5568d3;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .success {
            background: #2ecc71;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="success" id="successMsg">âœ… Registrasi berhasil!</div>
        
        <h1>ğŸ“ Form Registrasi</h1>
        
        <form id="registrationForm">
            <div class="form-group">
                <label>Nama Lengkap *</label>
                <input type="text" id="nama" required>
                <span class="error" id="namaError"></span>
            </div>
            
            <div class="form-group">
                <label>Email *</label>
                <input type="email" id="email" required>
                <span class="error" id="emailError"></span>
            </div>
            
            <div class="form-group">
                <label>Nomor HP *</label>
                <input type="tel" id="phone" placeholder="08xxxxxxxxxx" required>
                <span class="error" id="phoneError"></span>
            </div>
            
            <div class="form-group">
                <label>Tanggal Lahir *</label>
                <input type="date" id="dob" required>
                <span class="error" id="dobError"></span>
            </div>
            
            <div class="form-group">
                <label>Password *</label>
                <input type="password" id="password" required>
                <span class="hint" id="passwordStrength"></span>
                <span class="error" id="passwordError"></span>
            </div>
            
            <div class="form-group">
                <label>Konfirmasi Password *</label>
                <input type="password" id="confirmPassword" required>
                <span class="error" id="confirmError"></span>
            </div>
            
            <button type="submit">Daftar Sekarang</button>
        </form>
    </div>
    
    <script>
        const form = document.getElementById('registrationForm');
        const inputs = {
            nama: document.getElementById('nama'),
            email: document.getElementById('email'),
            phone: document.getElementById('phone'),
            dob: document.getElementById('dob'),
            password: document.getElementById('password'),
            confirmPassword: document.getElementById('confirmPassword')
        };
        
        // Real-time password strength
        inputs.password.addEventListener('input', () => {
            const password = inputs.password.value;
            const strengthDisplay = document.getElementById('passwordStrength');
            let strength = 0;
            
            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            if (password.length === 0) {
                strengthDisplay.textContent = '';
            } else if (strength <= 2) {
                strengthDisplay.textContent = 'ğŸ”´ Lemah';
                strengthDisplay.style.color = '#e74c3c';
            } else if (strength <= 3) {
                strengthDisplay.textContent = 'ğŸŸ¡ Sedang';
                strengthDisplay.style.color = '#f39c12';
            } else {
                strengthDisplay.textContent = 'ğŸŸ¢ Kuat';
                strengthDisplay.style.color = '#2ecc71';
            }
        });
        
        // Form submit
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            clearErrors();
            
            let isValid = true;
            
            // Validasi Nama
            if (inputs.nama.value.trim().length < 3) {
                showError('namaError', 'Nama minimal 3 karakter');
                isValid = false;
            }
            
            // Validasi Email
            if (!isValidEmail(inputs.email.value)) {
                showError('emailError', 'Format email tidak valid');
                isValid = false;
            }
            
            // Validasi HP
            if (!/^08[0-9]{8,11}$/.test(inputs.phone.value)) {
                showError('phoneError', 'Nomor HP harus diawali 08 dan 10-13 digit');
                isValid = false;
            }
            
            // Validasi Umur (minimal 17 tahun)
            const age = calculateAge(inputs.dob.value);
            if (age < 17) {
                showError('dobError', 'Usia minimal 17 tahun');
                isValid = false;
            }
            
            // Validasi Password
            if (inputs.password.value.length < 8) {
                showError('passwordError', 'Password minimal 8 karakter');
                isValid = false;
            }
            
            // Validasi Konfirmasi Password
            if (inputs.password.value !== inputs.confirmPassword.value) {
                showError('confirmError', 'Password tidak cocok');
                isValid = false;
            }
            
            if (isValid) {
                // Tampilkan success message
                document.getElementById('successMsg').style.display = 'block';
                
                console.log('Data yang disubmit:', {
                    nama: inputs.nama.value,
                    email: inputs.email.value,
                    phone: inputs.phone.value,
                    dob: inputs.dob.value
                });
                
                // Reset form setelah 2 detik
                setTimeout(() => {
                    form.reset();
                    document.getElementById('successMsg').style.display = 'none';
                }, 2000);
            }
        });
        
        // Helper functions
        function showError(id, message) {
            document.getElementById(id).textContent = message;
        }
        
        function clearErrors() {
            document.querySelectorAll('.error').forEach(el => el.textContent = '');
        }
        
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }
        
        function calculateAge(dob) {
            const birthDate = new Date(dob);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }
    </script>
</body>
</html>
```

**ğŸ‰ Fitur:**
- âœ… Real-time password strength indicator
- âœ… Validasi format email, nomor HP, umur
- âœ… Error messages yang jelas
- âœ… Visual feedback (border hijau/merah)
- âœ… Success message setelah submit

---

## âœ… Latihan Praktik

**Latihan 1:** Tambahkan validasi untuk:
- Username (5-15 karakter, hanya huruf & angka)
- Checkbox "Setuju dengan syarat dan ketentuan" yang wajib dicentang

**Latihan 2:** Buat validasi custom untuk:
- Password harus punya minimal 1 karakter special (!@#$%^&*)
- Tanggal lahir tidak boleh lebih dari 100 tahun yang lalu

---

## ğŸ¯ Yang Harus Dikuasai:

- âœ… HTML5 validation attributes (required, min, max, pattern, dll)
- âœ… JavaScript form validation
- âœ… `event.preventDefault()` untuk mencegah submit
- âœ… Real-time validation
- âœ… Regex untuk pattern matching
- âœ… User-friendly error messages
- âœ… Visual feedback (CSS untuk valid/invalid state)

---

**ğŸ’¡ Tips:**
- Selalu validasi di **client DAN server**
- Error message harus **jelas dan membantu**
- Gunakan **real-time validation** untuk UX yang lebih baik
- Test dengan berbagai input (edge cases)
- Gunakan library seperti **Yup** atau **Joi** untuk validasi kompleks (advanced) ğŸš€
