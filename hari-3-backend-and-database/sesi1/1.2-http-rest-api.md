# Materi 1.2: HTTP & REST API

## ğŸŒ Apa itu HTTP?

**HTTP** (HyperText Transfer Protocol) adalah **protokol** (aturan) yang digunakan untuk komunikasi antara client (browser) dan server di internet.

**ğŸ’¡ Analogi:**
HTTP seperti **bahasa/protocol saat telepon**:
- "Halo" = Request
- "Halo juga, ada yang bisa saya bantu?" = Response

Tanpa aturan ini, client dan server tidak bisa saling mengerti!

---

## ğŸ“¨ Anatomi HTTP Request

Setiap request dari client ke server punya komponen berikut:

```http
POST /api/users HTTP/1.1              â† Request Line
Host: mywebsite.com                   â† Headers
Content-Type: application/json
Authorization: Bearer token123

{                                      â† Body (opsional)
    "name": "Budi",
    "email": "budi@email.com"
}
```

### **1. Request Line**
- **Method:** POST, GET, PUT, DELETE
- **URL/Path:** `/api/users`
- **HTTP Version:** HTTP/1.1 atau HTTP/2

### **2. Headers**
Metadata tambahan tentang request:
- `Content-Type`: Format data (JSON, HTML, dll)
- `Authorization`: Token untuk autentikasi
- `User-Agent`: Info browser/device

### **3. Body** (Opsional)
Data yang dikirim (biasanya di POST/PUT).

---

## ğŸ”„ HTTP Methods (Verbs)

HTTP punya beberapa "method" untuk tipe operasi yang berbeda.

| Method | Fungsi | Contoh Use Case |
|--------|--------|-----------------|
| **GET** | Mengambil data | Melihat daftar produk |
| **POST** | Membuat data baru | Daftar akun baru |
| **PUT** | Update data (replace semua) | Edit profil lengkap |
| **PATCH** | Update sebagian data | Edit hanya nama |
| **DELETE** | Hapus data | Hapus akun |

---

### **ğŸ” GET - Mengambil Data**

**Karakteristik:**
- âœ… Tidak mengubah data di server
- âœ… Tidak punya body
- âœ… Data dikirim via URL (query params)

**Contoh:**
```http
GET /api/products?category=electronics&limit=10
```

**JavaScript (Frontend):**
```javascript
fetch('https://api.mywebsite.com/products?category=electronics')
    .then(res => res.json())
    .then(data => console.log(data));
```

**Node.js (Backend):**
```javascript
app.get('/api/products', (req, res) => {
    const category = req.query.category;  // 'electronics'
    const products = database.getProductsByCategory(category);
    res.json(products);
});
```

---

### **â• POST - Membuat Data Baru**

**Karakteristik:**
- âœ… Membuat resource baru
- âœ… Punya body (data yang dikirim)
- âœ… Tidak idempotent (jalankan 2x = 2 data baru)

**Contoh:**
```http
POST /api/users
Content-Type: application/json

{
    "name": "Budi",
    "email": "budi@email.com",
    "password": "rahasia123"
}
```

**JavaScript (Frontend):**
```javascript
fetch('https://api.mywebsite.com/users', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        name: 'Budi',
        email: 'budi@email.com',
        password: 'rahasia123'
    })
})
.then(res => res.json())
.then(data => console.log(data));
```

**Node.js (Backend):**
```javascript
app.post('/api/users', (req, res) => {
    const { name, email, password } = req.body;
    
    // Simpan ke database
    const newUser = database.createUser({ name, email, password });
    
    res.status(201).json({
        message: 'User created successfully',
        user: newUser
    });
});
```

---

### **ğŸ“ PUT - Update Data (Full Replace)**

**Contoh:**
```http
PUT /api/users/123
Content-Type: application/json

{
    "name": "Budi Santoso",
    "email": "budi.new@email.com",
    "phone": "08123456789"
}
```

**PATCH - Update Sebagian:**
```http
PATCH /api/users/123
Content-Type: application/json

{
    "phone": "08123456789"
}
```

---

### **ğŸ—‘ï¸ DELETE - Hapus Data**

**Contoh:**
```http
DELETE /api/users/123
```

**Node.js (Backend):**
```javascript
app.delete('/api/users/:id', (req, res) => {
    const userId = req.params.id;  // '123'
    
    database.deleteUser(userId);
    
    res.json({
        message: 'User deleted successfully'
    });
});
```

---

## ğŸ“Š HTTP Status Codes

Server mengirim "status code" di setiap response untuk memberitahu hasil request.

### **2xx - Success âœ…**
| Code | Arti | Kapan Dipakai |
|------|------|---------------|
| **200** | OK | Request berhasil |
| **201** | Created | Data baru berhasil dibuat (POST) |
| **204** | No Content | Berhasil tapi tidak ada data (DELETE) |

### **4xx - Client Error âŒ**
| Code | Arti | Kapan Dipakai |
|------|------|---------------|
| **400** | Bad Request | Data yang dikirim salah format |
| **401** | Unauthorized | Belum login / token invalid |
| **403** | Forbidden | Tidak punya permission |
| **404** | Not Found | Resource tidak ditemukan |
| **422** | Unprocessable Entity | Validasi gagal |

### **5xx - Server Error ğŸ’¥**
| Code | Arti | Kapan Dipakai |
|------|------|---------------|
| **500** | Internal Server Error | Error di code backend |
| **503** | Service Unavailable | Server down/maintenance |

**Contoh Penggunaan:**
```javascript
// Berhasil
res.status(200).json({ message: 'OK' });

// Data tidak ditemukan
res.status(404).json({ error: 'User not found' });

// Validasi error
res.status(400).json({ error: 'Email is required' });

// Server error
res.status(500).json({ error: 'Something went wrong' });
```

---

## ğŸ¯ Apa itu REST API?

**REST** (Representational State Transfer) adalah **gaya arsitektur** untuk membuat API yang mudah dipahami dan digunakan.

**ğŸ’¡ Analogi:**
REST API seperti **menu restoran**:
- Menu punya struktur jelas (Appetizer, Main Course, Dessert)
- Setiap item punya nama yang jelas
- Mudah dipesan tanpa kebingungan

---

## ğŸ“œ Prinsip REST API

### **1. Resource-Based (**Everything is a Resource**)**

Resource = Objek/data yang bisa diakses (User, Product, Order, dll).

**Contoh Resources:**
```
/users       â†’ Koleksi semua user
/users/123   â†’ User dengan ID 123
/products    â†’ Koleksi semua produk
/orders      â†’ Koleksi semua order
```

---

### **2. HTTP Methods untuk CRUD**

| Operation | HTTP Method | Endpoint | Deskripsi |
|-----------|-------------|----------|-----------|
| **Create** | POST | `/users` | Buat user baru |
| **Read (All)** | GET | `/users` | Ambil semua user |
| **Read (One)** | GET | `/users/123` | Ambil user ID 123 |
| **Update** | PUT/PATCH | `/users/123` | Update user ID 123 |
| **Delete** | DELETE | `/users/123` | Hapus user ID 123 |

---

### **3. Stateless (Tidak Menyimpan State)**

Setiap request **mandiri** (tidak tergantung request sebelumnya).

**âŒ Bad (Stateful):**
```
Request 1: POST /login â†’ Server ingat "user A login"
Request 2: GET /profile â†’ Server tahu ini user A
```

**âœ… Good (Stateless - REST):**
```
Request 1: POST /login â†’ Server kirim token
Request 2: GET /profile 
           Header: Authorization: Bearer token123
           â†’ Server cek token, baru proses
```

---

### **4. JSON sebagai Format Data**

REST API biasanya menggunakan **JSON** (bukan XML atau format lain).

**Response Example:**
```json
{
    "status": "success",
    "data": {
        "id": 123,
        "name": "Budi Santoso",
        "email": "budi@email.com"
    }
}
```

---

## ğŸ—ï¸ Contoh Struktur REST API

### **User Management API:**

```
GET    /api/users           â†’ Ambil semua user
GET    /api/users/123       â†’ Ambil user 123
POST   /api/users           â†’ Buat user baru
PUT    /api/users/123       â†’ Update user 123
DELETE /api/users/123       â†’ Hapus user 123
```

### **Product API:**

```
GET    /api/products                 â†’ Semua produk
GET    /api/products/456             â†’ Produk 456
GET    /api/products?category=shoes  â†’ Filter by category
POST   /api/products                 â†’ Tambah produk
PUT    /api/products/456             â†’ Update produk 456
DELETE /api/products/456             â†’ Hapus produk 456
```

### **Nested Resources (Relasi):**

```
GET /api/users/123/orders       â†’ Order milik user 123
GET /api/products/456/reviews   â†’ Review untuk produk 456
POST /api/users/123/orders      â†’ Buat order untuk user 123
```

---

## ğŸ› ï¸ Tools untuk Test API

### **1. Postman** (RECOMMENDED)
- Download: https://www.postman.com/
- GUI yang user-friendly
- Bisa simpan collection request
- Support semua HTTP methods

### **2. Thunder Client** (VS Code Extension)
- Install di VS Code
- Lightweight
- Terintegrasi dengan editor

### **3. cURL** (Command Line)
```bash
# GET request
curl https://api.example.com/users

# POST request
curl -X POST https://api.example.com/users \
  -H "Content-Type: application/json" \
  -d '{"name":"Budi","email":"budi@email.com"}'
```

### **4. Browser DevTools**
- F12 â†’ Network Tab
- Lihat semua request yang terjadi

---

## ğŸ® Latihan: Test Public API

### **JSONPlaceholder** (Fake REST API untuk latihan)

**Base URL:** `https://jsonplaceholder.typicode.com`

#### **1. GET All Posts**
```javascript
fetch('https://jsonplaceholder.typicode.com/posts')
    .then(res => res.json())
    .then(data => console.log(data));
```

#### **2. GET Single Post**
```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1')
    .then(res => res.json())
    .then(data => console.log(data));
```

#### **3. POST New Post**
```javascript
fetch('https://jsonplaceholder.typicode.com/posts', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        title: 'Belajar REST API',
        body: 'Ini adalah post baru',
        userId: 1
    })
})
.then(res => res.json())
.then(data => console.log(data));
```

#### **4. DELETE Post**
```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1', {
    method: 'DELETE'
})
.then(res => console.log('Deleted!'));
```

**ğŸ’¡ Coba di Browser Console atau Postman!**

---

## ğŸ“š Request & Response Headers Penting

### **Request Headers:**
```http
Content-Type: application/json        â† Format data yang dikirim
Authorization: Bearer token123        â† Token autentikasi
Accept: application/json              â† Format yang diharapkan
User-Agent: Chrome/120.0              â† Info browser
```

### **Response Headers:**
```http
Content-Type: application/json        â† Format data response
Access-Control-Allow-Origin: *        â† CORS setting
Cache-Control: no-cache               â† Caching policy
Set-Cookie: sessionId=abc123          â† Set cookie
```

---

## ğŸ¯ Best Practices REST API

### **1. Gunakan Noun, bukan Verb**

**âŒ Bad:**
```
/getUsers
/createUser
/deleteUser
```

**âœ… Good:**
```
GET    /users
POST   /users
DELETE /users/123
```

### **2. Gunakan Plural untuk Collections**

**âœ… Good:**
```
/users
/products
/orders
```

### **3. Versioning API**

```
/api/v1/users
/api/v2/users
```

### **4. Use Status Codes Properly**

```javascript
// Success
res.status(200).json(data);

// Created
res.status(201).json(newUser);

// Not Found
res.status(404).json({ error: 'User not found' });

// Validation Error
res.status(400).json({ error: 'Email is required' });
```

### **5. Consistent Response Format**

```json
{
    "status": "success",
    "data": { ... },
    "message": "User created successfully"
}

{
    "status": "error",
    "error": "Email already exists",
    "code": "EMAIL_DUPLICATE"
}
```

---

## âœ… Latihan Praktik

**Latihan 1:** Install **Postman** dan coba semua endpoints JSONPlaceholder. Capture screenshot hasil GET, POST, PUT, DELETE.

**Latihan 2:** Rancang REST API untuk aplikasi **To-Do List**:
- Apa saja endpoints yang dibutuhkan?
- HTTP method apa yang dipakai untuk setiap endpoint?

**Latihan 3:** Test API berikut dan identifikasi status code:
```
GET https://jsonplaceholder.typicode.com/posts/999  â†’ ?
POST https://jsonplaceholder.typicode.com/posts     â†’ ?
```

---

## ğŸ¯ Yang Harus Dikuasai:

- âœ… Protokol HTTP (request/response)
- âœ… HTTP Methods (GET, POST, PUT, DELETE, PATCH)
- âœ… HTTP Status Codes (200, 404, 500, dll)
- âœ… Konsep REST API
- âœ… Resource-based URLs
- âœ… Cara test API (Postman/Thunder Client)
- âœ… Best practices REST API

---

**ğŸ’¡ Tips:**
- Gunakan **Postman** untuk dokumentasi & testing
- Status code **sangat penting** untuk debugging
- REST adalah **guidelines**, bukan strict rules
- Practice dengan **public APIs** untuk lebih paham! ğŸš€

**ğŸŠ Next:** Kita akan install Node.js & Express dan membuat server pertama kita!
