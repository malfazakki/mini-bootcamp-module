# Materi 2.1: CRUD - Mengelola Data Pengeluaran

## ðŸ“ Apa itu CRUD?
CRUD adalah singkatan dari operasi dasar pengolahan data:
- **C**reate (Buat data baru) -> pakai **POST**
- **R**ead (Baca/Tampilkan data) -> pakai **GET**
- **U**pdate (Ubah data) -> pakai **PUT**
- **D**elete (Hapus data) -> pakai **DELETE**

---

## ðŸ’» Kode Lengkap (server.js)

Berikut adalah contoh server yang bisa menambah, melihat, dan menghapus data pengeluaran:

```javascript
const express = require("express");
const app = express();
app.use(express.json()); // Wajib ada agar bisa baca data JSON

// Penyimpanan sementara (Memory)
let daftarPengeluaran = [
    { id: 1, nama: "Beli Kopi", nominal: 15000 },
    { id: 2, nama: "Bensin", nominal: 50000 }
];

// 1. READ: Melihat semua pengeluaran
app.get("/pengeluaran", (req, res) => {
    res.json(daftarPengeluaran);
});

// 2. CREATE: Menambah pengeluaran baru
app.post("/pengeluaran", (req, res) => {
    const dataBaru = {
        id: daftarPengeluaran.length + 1,
        nama: req.body.nama,
        nominal: req.body.nominal
    };
    daftarPengeluaran.push(dataBaru);
    res.send("Data pengeluaran berhasil ditambahkan!");
});

// 3. UPDATE: Mengubah data pengeluaran
app.put("/pengeluaran/:id", (req, res) => {
    const idUbah = req.params.id;
    const { nama, nominal } = req.body;
    
    const index = daftarPengeluaran.findIndex(p => p.id == idUbah);
    
    if (index != -1) {
        daftarPengeluaran[index].nama = nama || daftarPengeluaran[index].nama;
        daftarPengeluaran[index].nominal = nominal || daftarPengeluaran[index].nominal;
        res.send("Data ID " + idUbah + " berhasil diupdate!");
    } else {
        res.status(404).send("Data tidak ditemukan!");
    }
});

// 4. DELETE: Menghapus pengeluaran berdasarkan ID
app.delete("/pengeluaran/:id", (req, res) => {
    const idHapus = req.params.id;
    daftarPengeluaran = daftarPengeluaran.filter(p => p.id != idHapus);
    res.send("Data ID " + idHapus + " sudah dihapus!");
});

app.listen(3000, () => console.log("Server CRUD jalan di port 3000"));
```

---

## ðŸš¦ Cara Mencoba (Testing)
1. **GET**: Buka browser ke `http://localhost:3000/pengeluaran`.
2. **POST/DELETE**: Untuk saat ini, kita bisa menggunakan browser Console atau tool seperti Postman/Thunder Client.

---

## âœ… Latihan Praktik (Tugas)
1. Tulis ulang kode di atas di file `server.js`.
2. Jalankan dengan `node server.js`.
3. Tambahkan satu route baru `app.get("/pengeluaran/:id")` untuk melihat satu data saja berdasarkan ID.

---

**ðŸŽ“ Setelah Sesi Ini, Kamu Sudah Bisa:**
- âœ… Membuat API lengkap (**CRUD**) untuk mengolah data.
- âœ… Mengambil data dari kiriman user (`req.body`).
- âœ… Mengambil data dari URL (`req.params`).
